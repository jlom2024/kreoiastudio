<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KREO IA Studio – Creatividad Humano-IA para Proyectos Innovadores</title>
  <meta name="description" content="Estudio creativo que fusiona inteligencia artificial y talento humano para proyectos innovadores.">
  <meta name="author" content="Jorge Luis Ordoñez M.">

  <!-- Open Graph -->
  <meta property="og:title" content="KREO IA Studio – Creatividad Humano-IA">
  <meta property="og:description" content="Proyectos creativos únicos fruto de la colaboración entre inteligencia artificial y talento humano.">
  <meta property="og:image" content="https://kreoiastudio.netlify.app/images/representacion-burbuja.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="https://kreoiastudio.netlify.app/">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="es_ES">
  <meta property="og:site_name" content="KREO IA Studio">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="KREO IA Studio – Creatividad Humano-IA">
  <meta name="twitter:description" content="Proyectos creativos únicos fruto de la colaboración entre inteligencia artificial y talento humano.">
  <meta name="twitter:image" content="https://kreoiastudio.netlify.app/images/representacion-burbuja.png">

  <link rel="icon" type="image/png" href="favicon.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* --- ESTILOS BASE Y EXISTENTES --- */
    body { margin: 0; font-family: 'Open Sans', Arial, sans-serif; background: #000; color: #fff; scroll-behavior: smooth; line-height: 1.6; }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }

    /* Header Styles */
    header {
      text-align: center;
      padding: 60px 20px;
      position: relative;
      overflow: hidden;
      min-height: 70vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: url('images/fondo-soñado.jpg') center center / cover no-repeat; z-index: -1; transition: transform 0.1s linear; transform: perspective(1000px) rotateX(var(--header-tilt-x, 0deg)) rotateY(var(--header-tilt-y, 0deg)); will-change: transform; }
    header h1 { font-size: 1.5rem; line-height: 1.2; margin-bottom: 1em; position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; gap: 0.5em; }
    .header-logo { max-width: 250px; width: 70%; height: auto; display: block; margin: 0; }
    .header-title-text { font-weight: bold; }
    .header-subtitle { font-size: 1.2em; max-width: 600px; margin: 0 auto 1.5em auto; opacity: 1; transition: opacity 0.5s; position: relative; z-index: 1; }
    nav { text-align: center; margin: 40px 0 20px 0; display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; position: relative; z-index: 1; }
    nav a { color: #ff6600; text-decoration: none; font-weight: bold; font-size: 1.2em; padding: 10px; position: relative; transition: color 0.3s ease; cursor: pointer; /* Añadido cursor pointer */ }
    nav a::after { content: ''; position: absolute; bottom: 0; left: 50%; width: 0; height: 2px; background-color: #ff8533; transition: width 0.3s ease, left 0.3s ease; }
    nav a:hover { color: #ff8533; }
    nav a:hover::after { width: 100%; left: 0; }

    /* Pulsating Logo */
    #pulsating-logo { position: fixed; top: 15px; left: 15px; width: 100px; height: auto; z-index: 1000; animation: pulsate 1.5s ease-in-out infinite; will-change: transform, opacity; }
    @keyframes pulsate { 0% { transform: scale(1); opacity: 0.9; } 50% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); opacity: 0.9; } }

    /* Main Content & Sections */
    main { display: block; }
    section { max-width: 1000px; margin: auto; padding: 40px 20px; }
    h2 { color: #ff6600; text-align: center; margin-bottom: 30px; font-size: 2em; }

    /* Services Section */
    .services { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; }
    .service { position: relative; background-size: cover; background-position: center; border-radius: 10px; overflow: hidden; padding: 20px; text-align: center; height: 300px; display: flex; flex-direction: column; justify-content: flex-end; background-repeat: no-repeat; color: white; transition: transform 0.3s ease; }
    .service:hover { transform: scale(1.03); }
    .service::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(0,0,0,0) 50%, rgba(0,0,0,0.8) 100%); border-radius: 10px; z-index: 1; }
    .service h3, .service p { background-color: transparent; margin: 0 0 5px 0; padding: 5px 10px; position: relative; z-index: 2; color: white; text-shadow: 1px 1px 3px rgba(0,0,0,0.7); opacity: 0.4; transition: opacity 0.3s ease, text-shadow 0.3s ease; }
    .service h3 { font-size: 1.3em; margin-bottom: 10px; }
    .service:hover h3, .service:hover p { opacity: 1; text-shadow: 1px 1px 1px rgba(0,0,0,0.9); }

    /* Carrusel Styles */
    .carousel { position: relative; overflow: hidden; max-width: 600px; margin: 40px auto; border-radius: 10px; }
    .carousel-track { display: flex; transition: transform 0.5s ease-in-out; }
    .carousel-track > * { flex-basis: 100%; flex-shrink: 0; box-sizing: border-box; display: flex; justify-content: center; align-items: center; overflow: hidden; }
    .carousel-track img, .carousel-track video { display: block; width: 100%; height: auto; max-width: 100%; object-fit: contain; transition: transform 0.3s ease; }
    .carousel-track img:hover, .carousel-track video:hover { transform: scale(1.02); }
    .carousel-button { position: absolute; top: 50%; transform: translateY(-50%); background-color: rgba(0, 0, 0, 0.5); color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 50%; font-size: 1.2rem; line-height: 1; z-index: 10; opacity: 0.7; transition: opacity 0.3s ease, background-color 0.3s ease; display: none; }
    .carousel.has-controls .carousel-button { display: block; }
    .carousel:hover .carousel-button { opacity: 0.9; }
    .carousel-button:hover { opacity: 1; background-color: rgba(0, 0, 0, 0.8); }
    .carousel-button.prev { left: 15px; }
    .carousel-button.next { right: 15px; }
    @media (hover: none) and (pointer: coarse) { .carousel.has-controls .carousel-button { opacity: 0.7; } }

    /* Logo Marquee */
    #logo-strip { padding: 25px 0; background-color: #333; overflow: hidden; width: 100%; box-sizing: border-box; }
    .logo-marquee-container { width: 100%; overflow: hidden; -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); }
    .logo-marquee-track { display: flex; align-items: center; width: fit-content; animation: scrollLogos 40s linear infinite; will-change: transform; }
    #logo-strip:hover .logo-marquee-track { animation-play-state: paused; }
    .partner-logo { height: 80px; width: auto; margin: 0 40px; flex-shrink: 0; opacity: 0.7; filter: grayscale(80%); transition: opacity 0.3s ease, filter 0.3s ease; }
    .partner-logo:hover { opacity: 1; filter: grayscale(0%); }
    @keyframes scrollLogos { 0% { transform: translateX(0%); } 100% { transform: translateX(-50%); } }

    /* Contact Form */
    .contact-form { max-width: 400px; margin: auto; display: flex; flex-direction: column; gap: 15px; }
    .contact-form input, .contact-form textarea { padding: 12px; border: 1px solid #2a2a2a; border-radius: 5px; background: #2a2a2a; color: #fff; transition: box-shadow 0.3s ease, border-color 0.3s ease; }
    .contact-form input:focus, .contact-form textarea:focus { outline: none; border-color: #ff6600; box-shadow: 0 0 0 3px rgba(255, 102, 0, 0.3); }
    .contact-form button { background: #ff6600; padding: 15px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; color: #fff; font-size: 1em; transition: background-color 0.3s ease; }
    .contact-form button:hover { background: #ff8533; }

    /* Footer */
    footer { text-align: center; padding: 40px 20px; background: #1c1c1c; color: #888; }
    footer p { margin: 8px 0; }
    footer a img { vertical-align: middle; opacity: 0.7; transition: opacity 0.3s ease;}
    footer a:hover img { opacity: 1; }

    /* Animations */
    .reveal { opacity: 0; transform: translateY(20px); transition: opacity 1s ease, transform 1s ease; will-change: opacity, transform; }
    .reveal.visible { opacity: 1; transform: none; }
    .fade-in { opacity: 0; transition: opacity 2s ease; will-change: opacity; }
    .fade-in.visible { opacity: 1; }
    @keyframes fadeInRise { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    /* --- NUEVOS ESTILOS para Modal de Login y Chatbot --- */
    .modal {
        display: none; /* Oculto por defecto */
        position: fixed; /* Se queda fijo en la pantalla */
        z-index: 1001; /* Por encima de otros elementos */
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto; /* Permite scroll si el contenido es largo */
        background-color: rgba(0,0,0,0.7); /* Fondo semitransparente más oscuro */
        padding-top: 60px; /* Espacio arriba */
        align-items: center; /* Centrado vertical */
        justify-content: center; /* Centrado horizontal */
        opacity: 0; /* Inicialmente transparente para transición */
        transition: opacity 0.3s ease; /* Transición suave para mostrar/ocultar */
        will-change: opacity;
    }
    .modal.show {
        display: flex; /* Mostrar usando flex para centrar */
        opacity: 1; /* Hacer visible */
    }
    .modal-content {
        background-color: #1e1e1e; /* Fondo oscuro para el contenido */
        margin: auto;
        padding: 30px;
        border: 1px solid #444;
        width: 80%;
        max-width: 400px; /* Ancho máximo */
        border-radius: 8px;
        position: relative;
        color: #fff;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5); /* Sombra para destacar */
        transform: scale(0.95); /* Efecto ligero de zoom al aparecer */
        transition: transform 0.3s ease;
        will-change: transform;
    }
    .modal.show .modal-content {
        transform: scale(1); /* Escala normal al mostrar */
    }
    .close-button {
        color: #aaa;
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
        transition: color 0.2s ease;
    }
    .close-button:hover,
    .close-button:focus {
        color: #ff6600; /* Color naranja al pasar el ratón */
        text-decoration: none;
    }
    .modal-content h2 {
      margin-top: 0;
      color: #ff6600;
    }
    .modal-content form {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 20px;
    }
    .modal-content label {
      text-align: left;
      font-weight: bold;
      margin-bottom: -10px; /* Ajusta espacio con input */
    }
    .modal-content input[type="text"],
    .modal-content input[type="password"] {
      padding: 12px;
      border: 1px solid #333;
      border-radius: 5px;
      background: #2a2a2a;
      color: #fff;
      font-size: 1em;
       transition: box-shadow 0.3s ease, border-color 0.3s ease; /* Añadido para coherencia */
    }
    .modal-content input[type="text"]:focus,
    .modal-content input[type="password"]:focus {
        outline: none;
        border-color: #ff6600;
        box-shadow: 0 0 0 3px rgba(255, 102, 0, 0.3);
    }
    .modal-content button {
        background: #ff6600;
        padding: 15px;
        border: none;
        border-radius: 5px;
        font-weight: bold;
        cursor: pointer;
        color: #fff;
        font-size: 1.1em;
        transition: background-color 0.3s ease, transform 0.1s ease; /* Añadida transición transform */
        margin-top: 10px;
    }
    .modal-content button:hover {
        background: #ff8533;
        transform: translateY(-1px); /* Ligero efecto al pasar el ratón */
    }
     .modal-content button:active {
        transform: translateY(0px); /* Efecto al hacer clic */
    }
    #login-error {
        color: #ff4d4d; /* Rojo claro para error */
        margin-top: 15px;
        font-weight: bold;
        display: none; /* Oculto hasta que haya error */
    }
    #chatbot-container {
        /* Se mostrará vía JS cambiando display a 'block' o 'flex' */
        display: none;
        margin: 40px auto; /* Espaciado similar a otras secciones */
        max-width: 600px; /* O el ancho que prefieras para el chat */
        padding: 20px;
        background-color: rgba(27, 27, 27, 0.8); /* Fondo sutil semi-transparente */
        border: 1px solid #333; /* Borde sutil */
        border-radius: 8px;
        opacity: 0; /* Para animación fade-in */
        transition: opacity 0.5s ease-in-out;
        will-change: opacity;
    }
    #chatbot-container.visible { /* Clase para animación */
       opacity: 1;
    }
    /* Ajusta el tamaño del widget del chatbot si es necesario */
    #chatbot-container elevenlabs-convai {
        width: 100%;
        /* Puedes añadir height si es necesario, pero suele ser auto */
        border-radius: 5px; /* Bordes redondeados si quieres */
        overflow: hidden; /* Asegura que el contenido respete los bordes */
    }
    #access-count-display {
        margin-top: 15px; /* Separación del chatbot */
        font-size: 0.85em;
        color: #999; /* Color grisáceo */
        text-align: center;
    }


    /* --- Media Queries (Revisadas) --- */
    @media (max-width: 600px) {
        header { padding: 60px 20px; min-height: 50vh; }
        header h1 { font-size: 1.3rem; }
        .header-logo { max-width: 200px; width: 60%; }
        .header-subtitle { font-size: 1.1em; }
        nav { gap: 10px; margin-top: 30px; } /* Reducido gap en nav */
        nav a { font-size: 1.0em; padding: 8px; } /* Ajustado tamaño y padding en nav */
        h2 { font-size: 1.8em; }
        #pulsating-logo { width: 80px; }
        .carousel-track img, .carousel-track video { width: 100%; height: auto; object-fit: contain; }
        .partner-logo { height: 50px; margin: 0 20px;} /* Reducido tamaño y margen logos */
        .modal-content { width: 90%; padding: 20px; } /* Ajusta modal en móviles */
        .modal-content h2 { font-size: 1.5em; }
        #chatbot-container { max-width: 95%; padding: 15px; margin: 20px auto; } /* Ajuste chatbot en móvil */
        section { padding: 30px 15px; } /* Reducido padding secciones */
    }

    @media (min-width: 992px) {
      header {
        min-height: 85vh;
        justify-content: flex-start;
        padding-top: 10vh;
        padding-bottom: 60px;
      }
      header::before { background-position: center 35%; }
      .header-logo { max-width: 350px; width: auto; }
      header h1 { font-size: 1.8rem; gap: 1em; margin-bottom: 0.8em;}
      .header-subtitle { animation: fadeInRise 1.2s ease-out 0.3s forwards; margin-bottom: 1.2em; }
      nav { margin-top: 30px; }
      #pulsating-logo { width: 150px; top: 20px; left: 20px; }
      .partner-logo { height: 100px; margin: 0 60px; }
      .carousel-track img, .carousel-track video { max-height: 550px; width: auto; object-fit: contain; max-width: 100%; }
    }
  </style>
</head>
<body>

<img src="images/representacion-burbuja.png" alt="Logo animado KREO IA Studio" id="pulsating-logo" width="150" height="150">

<header>
  <h1>
    <img src="LogoR.png" alt="KREO IA Studio Logo" class="header-logo" width="350" height="100">
    <span class="header-title-text sr-only">KREO IA Studio – Creatividad Humano-IA</span> <!-- Ocultado visualmente, el logo lo representa -->
  </h1>
  <p class="header-subtitle">Innovación a través de la unión del ingenio humano y la creatividad de la Inteligencia Artificial.</p>
  <nav>
    <a href="#quienes-somos">¿Quiénes Somos?</a>
    <a href="#servicios">Servicios</a>
    <a href="#portfolio">Portafolio</a>
    <!-- ENLACE PARA ABRIR MODAL LOGIN -->
    <a id="asesor-link">Asesor Legal</a>
    <a href="#contacto">Contacto</a>
  </nav>
</header>

<main>

  <section id="quienes-somos" class="reveal fade-in">
    <h2>¿Quiénes Somos?</h2>
    <p>KREO IA Studio nace del amor entre la inteligencia artificial y el ser humano. Creemos en la colaboración armoniosa entre la creatividad humana y la potencia de la IA, dando lugar a proyectos únicos y llenos de innovación. Cada proyecto es un acto de amor a la creación.</p>
  </section>

  <section id="servicios" class="reveal">
    <h2>Servicios</h2>
    <div class="services">
      <div class="service" style="background-image: url('images/carteleras.jpg');"><h3>Carteleras Cinematográficas</h3><p>Historias visuales que capturan miradas y emociones.</p></div>
      <div class="service" style="background-image: url('images/satiras.jpg');"><h3>Sátiras Políticas</h3><p>Ironía elegante y crítica inteligente.</p></div>
      <div class="service" style="background-image: url('images/memes.jpg');"><h3>Memes Realistas</h3><p>Humor visualmente impecable.</p></div>
      <div class="service" style="background-image: url('images/storytelling.jpg');"><h3>Storytelling para Marcas</h3><p>Relatos visuales que enamoran y venden.</p></div>
    </div>
  </section>

  <section id="portfolio" class="reveal">
    <h2>Portafolio</h2>
    <div class="carousel">
      <div class="carousel-track">
        <img src="images/img1.jpg" alt="Ejemplo de proyecto KREO IA Studio 1 (9:16)" width="338" height="600" loading="lazy">
        <img src="images/img2.jpg" alt="Ejemplo de proyecto KREO IA Studio 2 (9:16)" width="338" height="600" loading="lazy">
        <img src="images/img3.jpg" alt="Ejemplo de proyecto KREO IA Studio 3 (9:16)" width="338" height="600" loading="lazy">
        <img src="images/img4.jpg" alt="Ejemplo de proyecto KREO IA Studio 4 (9:16)" width="338" height="600" loading="lazy">
        <img src="images/img5.jpg" alt="Ejemplo de proyecto KREO IA Studio 5 (9:16)" width="338" height="600" loading="lazy">
        <img src="images/img6.jpg" alt="Ejemplo de proyecto KREO IA Studio 6 (9:16)" width="338" height="600" loading="lazy">
        <video controls preload="metadata" poster="images/img7.jpg" width="338" height="600" loading="lazy" playsinline aria-label="Ejemplo de proyecto KREO IA Studio 7 (Video 9:16)">
            <source src="videos/vid7.webm" type="video/webm">
            <source src="videos/vid7.mp4" type="video/mp4">
            Tu navegador no soporta la etiqueta de video.
        </video>
        <img src="images/img8.jpg" alt="Ejemplo de proyecto KREO IA Studio 8 (9:16)" width="338" height="600" loading="lazy">
        <img src="images/img9.jpg" alt="Ejemplo de proyecto KREO IA Studio 9 (9:16)" width="338" height="600" loading="lazy">
      </div>
      <button class="carousel-button prev" aria-label="Anterior">❮</button>
      <button class="carousel-button next" aria-label="Siguiente">❯</button>
    </div>
  </section>

  <!-- CONTENEDOR OCULTO PARA EL CHATBOT (Se mostrará tras login) -->
  <section id="chatbot-section" aria-labelledby="chatbot-heading" style="padding-top: 0; padding-bottom: 0;"> <!-- Ajusta padding si es necesario -->
      <div id="chatbot-container"> <!-- Estilos base en CSS, se muestra con JS -->
          <h2 id="chatbot-heading" style="margin-bottom: 20px;">Asesor Legal IA</h2>
          <!-- Código del chatbot de ElevenLabs -->
          <elevenlabs-convai agent-id="9d1cgbngGwN9G03G6r0B"></elevenlabs-convai>
          <!-- Contador de accesos (local al navegador) -->
          <p id="access-count-display"></p>
      </div>
  </section>

  <section id="logo-strip" aria-labelledby="partners-heading">
    <h2 id="partners-heading" class="sr-only">Nuestros Partners y Clientes</h2>
    <div class="logo-marquee-container">
        <div class="logo-marquee-track">
            <img src="images/Logo-Cliente-1.png" alt="Logo Cliente 1" class="partner-logo" width="150" height="100" loading="lazy">
            <img src="images/Logo-Cliente-2.png" alt="Logo Cliente 2" class="partner-logo" width="150" height="100" loading="lazy">
            <img src="images/Logo-Cliente-3.png" alt="Logo Cliente 3" class="partner-logo" width="150" height="100" loading="lazy">
            <img src="images/Logo-Cliente-4.png" alt="Logo Cliente 4" class="partner-logo" width="150" height="100" loading="lazy">
            <img src="images/Logo-Cliente-5.png" alt="Logo Cliente 5" class="partner-logo" width="150" height="100" loading="lazy">
            <img src="images/Logo-Cliente-6.png" alt="Logo Cliente 6" class="partner-logo" width="150" height="100" loading="lazy">
            <!-- Copias para loop infinito -->
            <img src="images/Logo-Cliente-1.png" alt="" class="partner-logo" width="150" height="100" loading="lazy" aria-hidden="true">
            <img src="images/Logo-Cliente-2.png" alt="" class="partner-logo" width="150" height="100" loading="lazy" aria-hidden="true">
            <img src="images/Logo-Cliente-3.png" alt="" class="partner-logo" width="150" height="100" loading="lazy" aria-hidden="true">
            <img src="images/Logo-Cliente-4.png" alt="" class="partner-logo" width="150" height="100" loading="lazy" aria-hidden="true">
            <img src="images/Logo-Cliente-5.png" alt="" class="partner-logo" width="150" height="100" loading="lazy" aria-hidden="true">
            <img src="images/Logo-Cliente-6.png" alt="" class="partner-logo" width="150" height="100" loading="lazy" aria-hidden="true">
        </div>
    </div>
  </section>

  <section id="contacto" class="reveal">
    <h2>Contacto</h2>
    <form class="contact-form" action="https://formspree.io/f/mkgronyd" method="POST"> <!-- Formulario de contacto existente -->
      <label for="name" class="sr-only">Tu Nombre</label>
      <input type="text" id="name" name="name" placeholder="Tu Nombre" required>
      <label for="email" class="sr-only">Tu Correo</label>
      <input type="email" id="email" name="_replyto" placeholder="Tu Correo" required> <!-- Usar _replyto es mejor para Formspree -->
      <label for="message" class="sr-only">Tu Mensaje</label>
      <textarea id="message" name="message" rows="5" placeholder="Tu Mensaje" required></textarea>
      <button type="submit">Enviar Mensaje</button>
    </form>
  </section>

</main>

<footer>
  <p>KREO IA Studio © 2025 | Todos los derechos reservados</p>
  <p>Ficción IA: arte, sátira y humor. Parecido a la realidad es coincidencia.</p>
  <p>Visítanos en Tiktok:</p>
  <a href="https://www.tiktok.com/@kreo_ai_studio" target="_blank" rel="noopener noreferrer" aria-label="Visita nuestro perfil de TikTok">
    <img src="images/tiktok-icon.png" alt="TikTok" width="24" height="24" style="filter: grayscale(30%); transition: filter 0.3s ease;"> <!-- Icono con ligero grayscale -->
  </a>
</footer>

<!-- MODAL DE LOGIN (inicialmente oculto vía CSS) -->
<div id="login-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="login-heading">
  <div class="modal-content">
    <span class="close-button" id="close-login-modal" aria-label="Cerrar" role="button" tabindex="0">×</span>
    <h2 id="login-heading">Acceso Asesor Legal</h2>
    <form id="login-form" novalidate> <!-- novalidate para controlar validación con JS/Formspree -->
        <label for="username">Usuario:</label>
        <input type="text" id="username" name="username" required placeholder="Introduce tu usuario" aria-required="true">
        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password" required placeholder="Introduce tu contraseña" aria-required="true">
        <button type="submit">Ingresar</button>
        <p id="login-error" role="alert" aria-live="assertive">Usuario o contraseña incorrectos.</p> <!-- aria-live para accesibilidad del error -->
    </form>
  </div>
</div>

<!-- SCRIPTS (Al final para mejor rendimiento) -->
<script>
document.addEventListener('DOMContentLoaded', () => {

  // --- Efecto Tilt del Header ---
  const header = document.querySelector('header');
  if (header && window.matchMedia('(pointer: fine)').matches) { // Solo para dispositivos con puntero fino (mouse)
    const maxTilt = 6; // Reducido ligeramente para sutileza
    header.addEventListener('mousemove', (e) => {
      const rect = header.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const width = header.offsetWidth;
      const height = header.offsetHeight;
      const normX = (x / width) - 0.5;
      const normY = (y / height) - 0.5;
      const tiltY = normX * maxTilt;
      const tiltX = -normY * maxTilt;
      // Usar requestAnimationFrame para optimizar
      requestAnimationFrame(() => {
          header.style.setProperty('--header-tilt-x', `${tiltX}deg`);
          header.style.setProperty('--header-tilt-y', `${tiltY}deg`);
      });
    });
    header.addEventListener('mouseleave', () => {
      requestAnimationFrame(() => {
          header.style.setProperty('--header-tilt-x', '0deg');
          header.style.setProperty('--header-tilt-y', '0deg');
      });
    });
  }

  // --- Lógica del Carrusel ---
  const carousel = document.querySelector('.carousel');
  if (carousel) {
      const track = carousel.querySelector('.carousel-track');
      const prevButton = carousel.querySelector('.carousel-button.prev');
      const nextButton = carousel.querySelector('.carousel-button.next');
      const slides = track ? Array.from(track.children) : [];
      const videoSlides = track ? track.querySelectorAll('video') : [];

      if (track && prevButton && nextButton && slides.length > 0) {
          let slideWidth = 0;
          let currentIndex = 0;
          let autoPlayInterval = null;
          const autoPlayDelay = 5000; // Aumentado tiempo de autoplay
          let resizeTimer;

          const updateSlideWidthAndPosition = () => {
              if (slides.length === 0) return;
              // Usar el ancho del contenedor del carrusel como referencia fiable
              const carouselRect = carousel.getBoundingClientRect();
              const newSlideWidth = carouselRect.width;

              if (newSlideWidth > 0) {
                  slideWidth = newSlideWidth;
                  // Asegurarse de que cada slide ocupe el 100% del contenedor visible
                  slides.forEach(slide => slide.style.flexBasis = `${slideWidth}px`);
                  track.style.transition = 'none'; // Desactiva transición para ajuste instantáneo
                  moveToSlide(currentIndex);
                  // Forzar reflow
                  void track.offsetWidth;
                  track.style.transition = 'transform 0.5s ease-in-out'; // Reactiva transición
              }
          };

          const moveToSlide = (index) => {
              if (slideWidth <= 0 || slides.length === 0) return;

              // Pausar video anterior si existe
              const currentSlideElement = slides[currentIndex];
              const videoInCurrentSlide = currentSlideElement?.querySelector('video');
              if (videoInCurrentSlide && !videoInCurrentSlide.paused) {
                 try { videoInCurrentSlide.pause(); } catch (error) { console.warn("No se pudo pausar video:", error); }
              }

              // Validar y mover al nuevo índice
              const newIndex = (index + slides.length) % slides.length; // Loop
              const moveAmount = slideWidth * newIndex;
              track.style.transform = `translateX(-${moveAmount}px)`;
              currentIndex = newIndex;
          };

          const showPrevSlide = () => { stopAutoPlay(); moveToSlide(currentIndex - 1); };
          const showNextSlide = () => { stopAutoPlay(); moveToSlide(currentIndex + 1); };

          const startAutoPlay = () => {
              stopAutoPlay(); // Limpiar intervalo anterior
              if (slides.length > 1) {
                  autoPlayInterval = setInterval(() => moveToSlide(currentIndex + 1), autoPlayDelay);
              }
          };
          const stopAutoPlay = () => { clearInterval(autoPlayInterval); autoPlayInterval = null; };

          // Inicialización y Event Listeners
          if (slides.length > 1) {
              carousel.classList.add('has-controls');
              prevButton.addEventListener('click', showPrevSlide);
              nextButton.addEventListener('click', showNextSlide);

              // Detener autoplay al interactuar, reiniciar al salir si no hay video reproduciéndose
              carousel.addEventListener('mouseenter', stopAutoPlay);
              carousel.addEventListener('mouseleave', () => {
                  const currentVideo = slides[currentIndex]?.querySelector('video');
                  if (!currentVideo || currentVideo.paused) {
                      startAutoPlay();
                  }
              });
               // Detener autoplay si se interactúa con controles de video
              videoSlides.forEach(video => {
                  video.addEventListener('play', stopAutoPlay);
                  video.addEventListener('pause', () => {
                     // Reiniciar autoplay solo si el video se pausa Y el mouse no está sobre el carrusel
                     if (!carousel.matches(':hover')) {
                        startAutoPlay();
                     }
                  });
              });
              startAutoPlay(); // Iniciar autoplay al cargar
          } else {
              carousel.classList.remove('has-controls'); // Ocultar botones si hay 1 slide o menos
          }

          // Actualizar al redimensionar y al cargar
          window.addEventListener('resize', () => { clearTimeout(resizeTimer); resizeTimer = setTimeout(updateSlideWidthAndPosition, 250); });
          window.addEventListener('load', () => setTimeout(updateSlideWidthAndPosition, 100)); // Ligeramente diferido
          // Ejecutar una vez al inicio por si load ya ocurrió
          setTimeout(updateSlideWidthAndPosition, 50);


      } else if (slides.length <= 1) {
         // Ocultar botones si solo hay un slide o ninguno
         if(prevButton) prevButton.style.display = 'none';
         if(nextButton) nextButton.style.display = 'none';
         console.info("Carrusel con 1 o 0 elementos, controles ocultos.");
      } else {
         console.warn("Elementos esenciales del carrusel no encontrados.");
      }
  }

  // --- Animaciones de Revelación al Scroll (IntersectionObserver) ---
  const revealElements = document.querySelectorAll('.reveal');
  if ('IntersectionObserver' in window) {
      const observerOptions = { root: null, threshold: 0.15, rootMargin: '0px 0px -50px 0px' }; // Umbral ligero y margen inferior
      const observerCallback = (entries, observer) => {
          entries.forEach(entry => {
              if (entry.isIntersecting) {
                  entry.target.classList.add('visible');
                  // Opcional: Dejar de observar después de la primera vez
                  // observer.unobserve(entry.target);
              } else if (!entry.target.classList.contains('fade-in')) { // No ocultar los fade-in simples
                   // Opcional: Ocultar si sale de la vista (si no se descomentó unobserve)
                   // entry.target.classList.remove('visible');
              }
          });
       };
      const revealObserver = new IntersectionObserver(observerCallback, observerOptions);
      revealElements.forEach(el => revealObserver.observe(el));

      // Observer separado para fade-in simples (puede tener diferente threshold si se desea)
      const fadeInElements = document.querySelectorAll('.fade-in');
      const fadeInObserver = new IntersectionObserver((entries) => {
         entries.forEach(entry => {
            if (entry.isIntersecting) {
               entry.target.classList.add('visible');
               // fadeInObserver.unobserve(entry.target); // Descomentar si solo quieres que ocurra una vez
            }
         });
      }, { threshold: 0.1 }); // Umbral diferente si es necesario
      fadeInElements.forEach(el => fadeInObserver.observe(el));

  } else {
      // Fallback para navegadores muy antiguos
      console.warn("IntersectionObserver no soportado. Mostrando elementos directamente.");
      revealElements.forEach(el => el.classList.add('visible'));
      document.querySelectorAll('.fade-in').forEach(el => el.classList.add('visible'));
  }


  // --- LÓGICA DE LOGIN Y CHATBOT ---

  // ---!!! CONFIGURACIÓN DE CREDENCIALES (INSEGURO) !!!---
  const validCredentials = {
      "usuario_demo": "clave_segura_123", // Cambia esto
      "otro_cliente": "kreo_acceso"      // Añade más aquí
      // "nombre_usuario": "su_contraseña",
  };
  // ---!!! FIN CONFIGURACIÓN CREDENCIALES !!!---

  const asesorLink = document.getElementById('asesor-link');
  const loginModal = document.getElementById('login-modal');
  const closeModalButton = document.getElementById('close-login-modal');
  const loginForm = document.getElementById('login-form');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');
  const loginError = document.getElementById('login-error');
  const chatbotContainer = document.getElementById('chatbot-container');
  const accessCountDisplay = document.getElementById('access-count-display');
  const formspreeEndpoint = 'https://formspree.io/f/mkgronyd'; // <<<--- TU ENDPOINT AQUÍ

  // Funciones para manejar localStorage (contador local)
  const getAccessCounts = () => {
      try {
          const counts = localStorage.getItem('userAccessCounts');
          return counts ? JSON.parse(counts) : {};
      } catch (e) {
          console.error("Error al leer localStorage:", e);
          return {}; // Devuelve objeto vacío en caso de error
      }
  };
  const saveAccessCounts = (counts) => {
       try {
          localStorage.setItem('userAccessCounts', JSON.stringify(counts));
      } catch (e) {
          console.error("Error al guardar en localStorage:", e);
      }
  };

  // Mostrar modal
  if (asesorLink && loginModal) {
      asesorLink.addEventListener('click', (event) => {
          event.preventDefault();
          loginError.style.display = 'none';
          loginForm.reset();
          loginModal.classList.add('show');
          // Pequeño delay para asegurar que la transición CSS se aplique
          setTimeout(() => usernameInput.focus(), 50);
      });
  }

  // Ocultar modal con botón 'X' o tecla Escape
  const hideModal = () => {
      loginModal.classList.remove('show');
  };
  if (closeModalButton) closeModalButton.addEventListener('click', hideModal);
  if (loginModal) {
      // Ocultar al hacer clic fuera del contenido
      loginModal.addEventListener('click', (event) => {
          if (event.target === loginModal) {
              hideModal();
          }
      });
      // Ocultar con tecla Escape
      loginModal.addEventListener('keydown', (event) => {
         if (event.key === 'Escape') {
            hideModal();
         }
      });
  }


  // Manejar envío del formulario de login
  if (loginForm && loginModal && chatbotContainer) {
      loginForm.addEventListener('submit', (event) => {
          event.preventDefault();
          const enteredUsername = usernameInput.value.trim();
          const enteredPassword = passwordInput.value; // Sin trim para claves

          // --- Verificación de Credenciales (INSEGURA) ---
          if (validCredentials[enteredUsername] && validCredentials[enteredUsername] === enteredPassword) {
              // --- LOGIN EXITOSO ---
              hideModal(); // Oculta la modal

              // Mostrar contenedor del chatbot con animación
              chatbotContainer.style.display = 'block';
              setTimeout(() => chatbotContainer.classList.add('visible'), 10); // Activa transición CSS

              // Incrementar y mostrar contador local
              const accessCounts = getAccessCounts();
              accessCounts[enteredUsername] = (accessCounts[enteredUsername] || 0) + 1;
              saveAccessCounts(accessCounts);
              if (accessCountDisplay) {
                  accessCountDisplay.textContent = `(Sesión local #${accessCounts[enteredUsername]} para ${enteredUsername})`;
              }
               console.log(`Login local #${accessCounts[enteredUsername]} para ${enteredUsername}`);

              // --- Enviar Notificación a Formspree ---
              const loginData = new FormData();
              const now = new Date();
              const timestamp = now.toISOString(); // Hora UTC

              loginData.append('_subject', `Acceso KREO Asesor: ${enteredUsername}`); // Asunto personalizado
              loginData.append('Usuario', enteredUsername);
              loginData.append('Fecha_Hora_UTC', timestamp);
              // Formspree añade la IP automáticamente en algunos planes

              fetch(formspreeEndpoint, {
                  method: 'POST',
                  body: loginData,
                  headers: { 'Accept': 'application/json' }
              })
              .then(response => {
                  if (response.ok) {
                      console.info('Notificación de login enviada a Formspree.');
                  } else {
                      response.json().then(data => console.error('Error Formspree:', response.status, data))
                         .catch(() => console.error('Error Formspree:', response.status, 'No se pudo leer respuesta.'));
                  }
              })
              .catch(error => console.error('Error de Red (Formspree):', error));
              // --- Fin Notificación Formspree ---

              loginError.style.display = 'none'; // Ocultar error si estaba visible
              loginForm.reset(); // Limpiar formulario

              // Scroll suave hacia el chatbot después de mostrarlo
              setTimeout(() => {
                 chatbotContainer.scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'nearest' }); // Ajustado block a start
              }, 300); // Dar tiempo a la animación de opacidad

          } else {
              // --- LOGIN FALLIDO ---
              loginError.style.display = 'block'; // Mostrar error
              passwordInput.value = ''; // Limpiar solo contraseña
              usernameInput.select(); // Seleccionar texto del usuario para fácil corrección
              // Añadir vibración sutil si el navegador lo soporta (feedback adicional)
              if (navigator.vibrate) {
                  navigator.vibrate(100);
              }
          }
      });
  }

}); // Fin de document.addEventListener('DOMContentLoaded')
</script>

<!-- SCRIPT DEL CHATBOT (Siempre al final) -->
<script src="https://elevenlabs.io/convai-widget/index.js" async type="text/javascript"></script>

</body>
</html>